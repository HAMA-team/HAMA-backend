# Phase 1 타임라인 및 실행 계획

**버전**: 1.0
**작성일**: 2025-10-01
**예상 기간**: 12-14주 (병렬 작업 고려)

---

## 목차

1. [전체 타임라인 요약](#전체-타임라인-요약)
2. [1단계: 기본 인프라](#1단계-기본-인프라-2주)
3. [2단계: 마스터 에이전트 Mock](#2단계-마스터-에이전트-mock-2주)
4. [3단계: 핵심 에이전트 Mock](#3단계-핵심-에이전트-mock-3주)
5. [4단계: 지원 에이전트 Mock](#4단계-지원-에이전트-mock-1주)
6. [5단계: E2E 플로우 검증](#5단계-e2e-플로우-검증-2주)
7. [6단계: 실제 구현](#6단계-실제-구현-6주)
8. [병렬 작업 최적화](#병렬-작업-최적화)

---

## 전체 타임라인 요약

```
Week 1-2:   기본 인프라 구축
            ├─ FastAPI 프로젝트 설정
            ├─ PostgreSQL 스키마
            └─ LangGraph 초기화

Week 3-4:   마스터 에이전트 Mock
            ├─ 의도 분석 (키워드)
            ├─ 라우팅 로직
            └─ HITL 트리거

Week 5-7:   핵심 에이전트 Mock (9개)
            ├─ 공통 인터페이스
            ├─ Mock 데이터 생성
            └─ 에이전트별 기본 구조

Week 8:     지원 기능 Mock
            ├─ 모니터링
            └─ 교육/질의

Week 9-10:  E2E 플로우 검증
            ├─ 3가지 핵심 시나리오 테스트
            ├─ 통합 테스트
            └─ 버그 수정

Week 11-16: 실제 구현 (우선순위별)
            ├─ 데이터 수집 (1-2주)
            ├─ 리서치 (2주, 병렬)
            ├─ 전략 (3주, 병렬)
            ├─ 포트폴리오 (3주, 병렬)
            ├─ 리스크 (2주)
            └─ 기타 (2주)
```

---

## 1단계: 기본 인프라 (2주)

### Week 1: 프로젝트 설정

#### 목표
- Python 프로젝트 기반 마련
- 개발 환경 구축
- 기본 API 엔드포인트

#### 상세 작업

**Day 1-2: 프로젝트 초기화**
- [ ] 저장소 설정 (Git)
- [ ] 디렉터리 구조 생성
- [ ] requirements.txt 작성
- [ ] 가상환경 설정
- [ ] .gitignore, .env.example 설정

**Day 3-4: FastAPI 설정**
- [ ] FastAPI 앱 초기화
- [ ] CORS 설정
- [ ] 기본 엔드포인트 (`/`, `/health`)
- [ ] Pydantic 스키마 정의
- [ ] API 문서 자동 생성 확인

**Day 5: PostgreSQL 설정**
- [ ] PostgreSQL 설치 및 DB 생성
- [ ] SQLAlchemy 비동기 설정
- [ ] Base 모델 정의
- [ ] Alembic 초기화

### Week 2: 데이터베이스 및 LangGraph

**Day 6-7: 데이터 모델**
- [ ] `UserProfile` 모델
- [ ] `Portfolio` 모델
- [ ] 마이그레이션 생성 및 적용
- [ ] CRUD 기본 함수

**Day 8-9: LangGraph 설정**
- [ ] `AgentState` 정의
- [ ] StateGraph 초기화
- [ ] 기본 노드 추가
- [ ] 간단한 플로우 테스트

**Day 10: 테스트 환경**
- [ ] pytest 설정
- [ ] 기본 테스트 작성
- [ ] CI/CD 준비 (선택)

#### 검증 기준
- [ ] `uvicorn src.main:app --reload` 실행 성공
- [ ] `/docs` 에서 Swagger UI 확인
- [ ] PostgreSQL 연결 성공
- [ ] 기본 CRUD 테스트 통과

---

## 2단계: 마스터 에이전트 Mock (2주)

### Week 3: 의도 분석 및 라우팅

#### 목표
- 사용자 질의 의도 분석
- 에이전트 라우팅 로직

#### 상세 작업

**Day 11-12: 공통 인터페이스**
- [ ] `AgentInterface` 추상 클래스
- [ ] `AgentInput`, `AgentOutput` 스키마
- [ ] 에이전트 베이스 클래스

**Day 13-14: 의도 분석**
- [ ] 키워드 기반 intent classification
- [ ] 7가지 카테고리 정의
- [ ] 분류 로직 구현
- [ ] 단위 테스트

**Day 15: 라우팅 맵**
- [ ] Intent → Agent 매핑 정의
- [ ] 라우팅 로직 구현
- [ ] Mock 에이전트 호출 구조

### Week 4: HITL 및 응답 통합

**Day 16-17: HITL 트리거**
- [ ] HITL 조건 정의
- [ ] 자동화 레벨별 로직
- [ ] 트리거 데이터 구조
- [ ] 테스트

**Day 18-19: 응답 생성**
- [ ] Mock 응답 생성기
- [ ] 여러 에이전트 결과 통합
- [ ] 최종 응답 포맷

**Day 20: 통합 테스트**
- [ ] 마스터 에이전트 E2E 테스트
- [ ] 각 Intent별 테스트
- [ ] HITL 트리거 테스트

#### 검증 기준
- [ ] "삼성전자 분석해줘" → `stock_analysis` 분류
- [ ] "삼성전자 매수" → HITL 트리거 발동
- [ ] Mock 응답 정상 생성

---

## 3단계: 핵심 에이전트 Mock (3주)

### Week 5: 데이터 레이어 에이전트

#### 목표
- 개인화, 데이터 수집 에이전트 Mock

#### 상세 작업

**Day 21-22: 개인화 에이전트**
- [ ] Mock `UserProfile` 반환
- [ ] 프로필 조회/수정 인터페이스
- [ ] DB 연동 TODO 주석
- [ ] 테스트

**Day 23-25: 데이터 수집 에이전트**
- [ ] Mock 주가 데이터
- [ ] Mock 재무 데이터
- [ ] Mock 뉴스 데이터
- [ ] 통합 데이터 구조
- [ ] 테스트

### Week 6: 분석 레이어 에이전트

**Day 26-27: 리서치 에이전트**
- [ ] Mock 기업 분석
- [ ] Mock 재무 비율
- [ ] Mock 기술적 지표
- [ ] 평가 시스템 (1-5)
- [ ] 테스트

**Day 28-30: 전략 에이전트**
- [ ] Mock Bull 분석
- [ ] Mock Bear 분석
- [ ] Consensus 계산
- [ ] 매매 시그널 생성
- [ ] 테스트

### Week 7: 포트폴리오 및 리스크

**Day 31-33: 포트폴리오 에이전트**
- [ ] Mock 포트폴리오 구성
- [ ] Mock 최적화 결과
- [ ] Mock 리밸런싱
- [ ] 자동화 레벨별 옵션
- [ ] 테스트

**Day 34-35: 리스크 에이전트**
- [ ] Mock 리스크 지표
- [ ] 집중도 체크
- [ ] HITL 트리거 로직
- [ ] 경고 메시지 생성
- [ ] 테스트

#### 검증 기준
- [ ] 모든 에이전트 Mock 응답 생성
- [ ] 에이전트 간 데이터 전달 정상
- [ ] 단위 테스트 100% 통과

---

## 4단계: 지원 에이전트 Mock (1주)

### Week 8: 모니터링 및 교육

#### 목표
- 모니터링, 교육/질의 에이전트 Mock

#### 상세 작업

**Day 36-37: 모니터링 에이전트**
- [ ] Mock 가격 알림
- [ ] Mock 이벤트 감지
- [ ] 알림 데이터 구조
- [ ] 테스트

**Day 38-39: 교육/질의 에이전트**
- [ ] Mock 용어 설명
- [ ] Mock 일반 질문 응답
- [ ] 답변 데이터 구조
- [ ] 테스트

**Day 40-42: 전체 Mock 점검**
- [ ] 9개 에이전트 통합 확인
- [ ] 인터페이스 일관성 체크
- [ ] Mock 데이터 품질 개선
- [ ] 문서 업데이트

#### 검증 기준
- [ ] 모든 에이전트 Mock 완성
- [ ] 통합 테스트 통과
- [ ] Mock 데이터 현실성 확보

---

## 5단계: E2E 플로우 검증 (2주)

### Week 9: 핵심 시나리오 테스트

#### 목표
- 3가지 핵심 플로우 검증

#### 상세 작업

**Day 43-45: 시나리오 1 - 종목 분석**
```
사용자: "삼성전자 분석해줘"
     ↓
마스터 → 데이터 수집 + 리서치 + 전략
     ↓
통합 응답 생성
```
- [ ] 플로우 구현
- [ ] 에이전트 병렬 호출
- [ ] 응답 통합
- [ ] 테스트 자동화

**Day 46-48: 시나리오 2 - 매매 지시 (HITL)**
```
사용자: "삼성전자 1000만원 매수"
     ↓
전략 → 리스크 → HITL 트리거
     ↓
사용자 승인 요청
```
- [ ] 플로우 구현
- [ ] HITL 트리거 검증
- [ ] 승인/거부 처리
- [ ] 테스트 자동화

**Day 49: 시나리오 3 - 리밸런싱**
```
사용자: "포트폴리오 리밸런싱"
     ↓
포트폴리오 → 리밸런싱안 생성
     ↓
자동화 레벨별 옵션
```
- [ ] 플로우 구현
- [ ] 레벨별 옵션 테스트
- [ ] 테스트 자동화

### Week 10: 통합 및 개선

**Day 50-52: 통합 테스트**
- [ ] E2E 테스트 스위트 완성
- [ ] 성능 테스트 (응답 시간)
- [ ] 에러 핸들링 개선
- [ ] 로깅 추가

**Day 53-56: 버그 수정 및 최적화**
- [ ] 발견된 버그 수정
- [ ] 응답 포맷 일관성
- [ ] UX 개선
- [ ] 문서 업데이트

#### 검증 기준
- [ ] 3가지 시나리오 100% 동작
- [ ] 평균 응답 시간 < 3초
- [ ] 에러 없이 완료
- [ ] 자동화 테스트 통과

---

## 6단계: 실제 구현 (6주)

### Week 11-12: 데이터 레이어

#### 목표
- 실제 데이터 소스 연동

#### 상세 작업

**Week 11: pykrx + DART**
- [ ] pykrx 설치 및 테스트
- [ ] DART API 키 발급
- [ ] OpenDartReader 연동
- [ ] 재무 데이터 수집 함수
- [ ] 캐싱 전략 구현
- [ ] 통합 테스트

**Week 12: 데이터 수집 에이전트 완성**
- [ ] 한국투자증권 API (선택)
- [ ] 네이버 뉴스 크롤링 (선택)
- [ ] 데이터 정규화
- [ ] 에러 핸들링
- [ ] 레이트 리밋 관리
- [ ] 통합 테스트

#### 검증 기준
- [ ] 실제 데이터 수집 성공
- [ ] 캐싱 정상 작동
- [ ] API 에러 < 5%

### Week 13-14: 리서치 + 포트폴리오 (병렬)

#### Week 13: 리서치 에이전트

**목표**: 재무/기술적 분석 구현

- [ ] 재무 분석 로직 (ROE, ROA 등)
- [ ] 기술적 지표 (TA-Lib)
- [ ] 이동평균, RSI, MACD 계산
- [ ] 평가 시스템 구현
- [ ] 테스트

#### Week 14: 포트폴리오 에이전트

**목표**: 최적화 알고리즘 구현

- [ ] 샤프 비율 계산
- [ ] scipy.optimize 활용
- [ ] 제약 조건 설정
- [ ] 리밸런싱 로직
- [ ] 테스트

### Week 15-16: 전략 + 리스크 (병렬)

#### Week 15: 전략 에이전트

**목표**: Bull/Bear 분석 구현

- [ ] Bull 서브에이전트 (LLM 기반)
- [ ] Bear 서브에이전트 (LLM 기반)
- [ ] Consensus 계산
- [ ] 시그널 생성 로직
- [ ] 테스트

#### Week 16: 리스크 에이전트 + 마무리

**목표**: 리스크 측정 및 전체 통합

- [ ] VaR 계산
- [ ] 집중도 리스크
- [ ] HITL 트리거 정교화
- [ ] 모니터링 에이전트 실제 구현
- [ ] 교육/질의 에이전트 실제 구현
- [ ] 전체 통합 테스트
- [ ] 문서 업데이트

#### 검증 기준
- [ ] 모든 P0 에이전트 실제 구현 완료
- [ ] E2E 테스트 실제 데이터로 통과
- [ ] 성능 기준 충족 (< 3초)

---

## 병렬 작업 최적화

### 병렬 가능 작업

**Week 13-14 (리서치 + 포트폴리오)**
- 두 에이전트는 독립적
- 2명이 동시 작업 가능
- 예상 단축: 2주 → 2주 (유지)

**Week 15-16 (전략 + 리스크)**
- 전략 에이전트 우선, 리스크는 병행 가능
- 2명이 동시 작업 가능
- 예상 단축: 4주 → 2주

**총 예상 기간**:
- 순차 작업: 18주
- 병렬 작업: **12-14주**

---

## 마일스톤

| Week | 마일스톤 | 완료 기준 |
|------|---------|----------|
| **Week 2** | 기본 인프라 완성 | FastAPI + DB + LangGraph 실행 |
| **Week 4** | 마스터 에이전트 Mock | 의도 분석 + 라우팅 + HITL |
| **Week 7** | 모든 에이전트 Mock | 9개 에이전트 Mock 완성 |
| **Week 10** | E2E 검증 완료 | 3가지 시나리오 100% 동작 |
| **Week 12** | 데이터 레이어 완성 | 실제 데이터 수집 성공 |
| **Week 16** | Phase 1 완료 | 모든 P0 기능 실제 구현 |

---

## 리스크 및 대응

| 리스크 | 영향도 | 대응 방안 |
|--------|--------|----------|
| TA-Lib 설치 실패 | Medium | 대체 라이브러리 (pandas-ta) |
| API 제한 | High | 캐싱 강화, Rate limiter |
| LangGraph 학습 곡선 | Medium | 간단한 구조로 시작 |
| 병렬 작업 조율 | Medium | 주간 동기화 미팅 |
| 데이터 품질 | High | Mock → 실제 전환 전 검증 |

---

## 주간 체크리스트

### 매주 금요일 확인

- [ ] 이번 주 목표 달성률
- [ ] 다음 주 우선순위
- [ ] 블로커 이슈
- [ ] 코드 리뷰 완료
- [ ] 테스트 커버리지 > 80%
- [ ] 문서 업데이트

---

## 다음 단계 (Phase 2)

**Phase 1 완료 후**:
1. 베타 테스터 모집 (5명+)
2. 피드백 수집 및 개선
3. Phase 2 기획
   - 실제 매매 실행
   - 사용자 계정 시스템
   - Redis 도입
   - 백테스팅
4. 프론트엔드 고도화

---

**문서 끝**

**관련 문서**:
- [Phase 1 개요](./phase1-overview.md)
- [데이터 소스 통합](./data-sources-integration.md)
- [에이전트 구현 상세](./agent-implementation-details.md)
- [기술 스택 설정](./tech-stack-setup.md)